name: Changelog Generator

on:
  push:
    branches: [ main ]

jobs:
  generate_changelog_file:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Generate changelog
      uses: browniebroke/action-github-changelog-generator@patch-2
      with:
        #token: ${{ secrets.GITHUB_TOKEN }}
        author: true
        unreleased: true
        issues: true
        pullRequests: true
        prWoLabels: false
        compareLink: true
        output: CHANGELOG.md
        breakingLabel: ":boom: Breaking Changes:"
        breakingLabels: "breaking"
        deprecatedLabel: ":fire: Removals"
        deprecatedLabels: "removal"
        enhancementLabel: ":rocket: Features and Enhancements:"
        enhancementLabels: "enhancement"
        bugsLabel: ":beetle: Bug Fixes:"
        bugsLabels: "bug,bug-fix,fix,fixes"
        removedLabel: ':wastebasket: Removals:'
        removedLabels: 'removal'
        addSections: >-
                {
                        "documentation":{
                                "prefix":":books: Documentation updates:",
                                "labels":["documentation"]
                        },
                        "style": {
                                "prefix": ":lipstick: Style:"
                                "labels": ["style"]
                        }
                        "dependencies": {
                                "prefix": ":package: Dependencies:"
                                "labels": ["dependencies"]
                        },
                        "refactoring": {
                                "prefix": ":hammer: Refactoring:"
                                "labels": ["refactoring"]
                        },
                        "ci": {
                                "prefix": ":construction_worker: Build and CI:"
                                "labels": ["ci", "build"]
                        }

                }
        # See: emojipedia.org for emoji codes
    - uses: EndBug/add-and-commit@v7 # You can change this to use a specific version
      with:
        add: 'CHANGELOG.md'
